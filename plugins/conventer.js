let Leon = require('../events');
let {MessageType,Mimetype} = require('@adiwajshing/baileys');
let fs = require('fs');
let ffmpeg = require('fluent-ffmpeg');
let {execFile} = require('child_process');
let cwebp = require('cwebp-bin');
let cheerio = require('cheerio');
let Axios = require('axios');
let FormData = require('form-data');
let Config = require('../config');
let Language = require('../language');
let Lang = Language.getString('conventer');

var _0x12ec91=_0x457f;function _0x457f(_0x5c7cf3,_0x324f60){var _0x27637c=_0x2763();return _0x457f=function(_0x457fd9,_0x2956b1){_0x457fd9=_0x457fd9-0x82;var _0x8cf1f9=_0x27637c[_0x457fd9];return _0x8cf1f9;},_0x457f(_0x5c7cf3,_0x324f60);}(function(_0x3dc0e3,_0xf32366){var _0x529dc7=_0x457f,_0x275e95=_0x3dc0e3();while(!![]){try{var _0x1fec47=-parseInt(_0x529dc7(0x8b))/0x1+-parseInt(_0x529dc7(0x8f))/0x2+-parseInt(_0x529dc7(0x85))/0x3*(-parseInt(_0x529dc7(0x87))/0x4)+-parseInt(_0x529dc7(0x84))/0x5+parseInt(_0x529dc7(0x86))/0x6+parseInt(_0x529dc7(0x90))/0x7*(-parseInt(_0x529dc7(0x8a))/0x8)+parseInt(_0x529dc7(0x89))/0x9*(parseInt(_0x529dc7(0x83))/0xa);if(_0x1fec47===_0xf32366)break;else _0x275e95['push'](_0x275e95['shift']());}catch(_0x312f7f){_0x275e95['push'](_0x275e95['shift']());}}}(_0x2763,0x6631f));var VS_DESC='',STICKER_NEEDREPLY='',ANIMATE='';if(Config[_0x12ec91(0x82)]=='EN')VS_DESC='Converts\x20sticker\x20to\x20video.',STICKER_NEEDREPLY='*You\x20must\x20reply\x20to\x20any\x20Sticker!*',ANIMATE='```Converting\x20Sticker\x20To\x20Video...```';if(Config[_0x12ec91(0x82)]=='ML')VS_DESC='സ്റ്റിക്കർ\x20വീഡിയോയിലേക്ക്\x20പരിവർത്തനം\x20ചെയ്യുന്നു.',STICKER_NEEDREPLY=_0x12ec91(0x8c),ANIMATE=_0x12ec91(0x8d);if(Config[_0x12ec91(0x82)]=='ID')VS_DESC=_0x12ec91(0x8e),STICKER_NEEDREPLY='*Anda\x20harus\x20membalas\x20Stiker\x20apa\x20pun!*',ANIMATE=_0x12ec91(0x88);function _0x2763(){var _0x5b4e7e=['883780iUIkBY','2447645nYIZQe','483vJhPFv','4361544tfuTUg','20036uBLWAC','```Mengonversi\x20Stiker\x20Menjadi\x20Video...```','117eusDkC','31024KVFEzp','591998OgfyDx','*നിങ്ങൾ\x20ഒരു\x20സ്റ്റിക്കറിന്\x20മറുപടി\x20നൽകണം!*','```സ്റ്റിക്കർ\x20വീഡിയോയിലേക്ക്\x20പരിവർത്തനം\x20ചെയ്യുന്നു...```','Mengonversi\x20stiker\x20menjadi\x20video.','1239718DPqMuq','1015NBdjTO','LANG'];_0x2763=function(){return _0x5b4e7e;};return _0x2763();}
(function(_0x2d0ea8,_0x20c068){const _0x120fba=_0x379f,_0x3fc668=_0x2d0ea8();while(!![]){try{const _0x141333=-parseInt(_0x120fba(0x17d))/0x1+parseInt(_0x120fba(0x18a))/0x2*(-parseInt(_0x120fba(0x189))/0x3)+-parseInt(_0x120fba(0x18d))/0x4*(-parseInt(_0x120fba(0x187))/0x5)+-parseInt(_0x120fba(0x190))/0x6+-parseInt(_0x120fba(0x18e))/0x7*(parseInt(_0x120fba(0x178))/0x8)+parseInt(_0x120fba(0x188))/0x9*(parseInt(_0x120fba(0x184))/0xa)+-parseInt(_0x120fba(0x183))/0xb*(-parseInt(_0x120fba(0x18b))/0xc);if(_0x141333===_0x20c068)break;else _0x3fc668['push'](_0x3fc668['shift']());}catch(_0x143db9){_0x3fc668['push'](_0x3fc668['shift']());}}}(_0x56ff,0x29c3e));function _0x379f(_0x4e4d64,_0x42b391){const _0x56ff2b=_0x56ff();return _0x379f=function(_0x379fc2,_0x4071b1){_0x379fc2=_0x379fc2-0x177;let _0x956243=_0x56ff2b[_0x379fc2];return _0x956243;},_0x379f(_0x4e4d64,_0x42b391);}function sticker2Video(_0x383e8c){return new Promise(async(_0x4f7b82,_0x45fe8b)=>{const _0x46840e=_0x379f,_0x3a82f8=new FormData();_0x3a82f8[_0x46840e(0x177)](_0x46840e(0x17e),''),_0x3a82f8[_0x46840e(0x177)](_0x46840e(0x179),fs[_0x46840e(0x195)](_0x383e8c)),await Axios({'method':'post','url':_0x46840e(0x17c),'data':_0x3a82f8,'headers':{'Content-Type':'multipart/form-data\x20boundary='+_0x3a82f8[_0x46840e(0x193)]}})['then'](async({data:_0x417292})=>{const _0x1d58fc=_0x46840e,_0x5ab190=new FormData(),_0x367972=cheerio[_0x1d58fc(0x181)](_0x417292),_0xfa9acf=_0x367972('input[name=\x22file\x22]')[_0x1d58fc(0x191)](_0x1d58fc(0x18f)),_0x2ef30f=_0x367972(_0x1d58fc(0x17f))[_0x1d58fc(0x191)](_0x1d58fc(0x18f)),_0x3f4364=_0x367972('input[name=\x22file\x22]')['attr']('value'),_0x5e9097={'file':_0xfa9acf,'token':_0x2ef30f,'convert':_0x3f4364};_0x5ab190[_0x1d58fc(0x177)](_0x1d58fc(0x180),_0x5e9097[_0x1d58fc(0x180)]),_0x5ab190[_0x1d58fc(0x177)](_0x1d58fc(0x182),_0x5e9097[_0x1d58fc(0x182)]),_0x5ab190[_0x1d58fc(0x177)](_0x1d58fc(0x17a),_0x5e9097['convert']),await Axios({'method':'post','url':_0x1d58fc(0x192)+_0x5e9097[_0x1d58fc(0x180)],'data':_0x5ab190,'headers':{'Content-Type':_0x1d58fc(0x18c)+_0x5ab190['_boundary']}})[_0x1d58fc(0x17b)](({data:_0x100a91})=>{const _0x498fba=_0x1d58fc,_0x12c164=cheerio[_0x498fba(0x181)](_0x100a91),_0x24e256=_0x498fba(0x186)+_0x12c164('div#output\x20>\x20p.outfile\x20>\x20video\x20>\x20source')[_0x498fba(0x191)]('src');_0x4f7b82({'status':!![],'message':_0x498fba(0x194),'result':_0x24e256});})[_0x1d58fc(0x185)](_0x45fe8b);})[_0x46840e(0x185)](_0x45fe8b);});}function _0x56ff(){const _0x21195a=['https:','549385UkFoYp','3141Fmxcky','3HDAQIO','391868tnUNyP','10524tRAIqw','multipart/form-data\x20boundary=','4JqBJfX','395346HDOqCT','value','1755480xShEVN','attr','https://ezgif.com/webp-to-mp4/','_boundary','*Made\x20by\x20Leon*','createReadStream','append','32ixRfKK','new-image','convert','then','https://s6.ezgif.com/webp-to-mp4','215694kFbeGg','new-image-url','input[name=\x22token\x22]','file','load','token','11891CQdumG','1240rxppyn','catch'];_0x56ff=function(){return _0x21195a;};return _0x56ff();}

if (Config.WORKTYPE == 'private') {

    Leon.addCommand({pattern: 'mp3', fromMe: true, desc: Lang.MP4TOAUDİO_DESC}, (async (message, match) => {    

    function _0xc6ab(){var _0x144903=['11BjfYrS','end','15385836MGFFxI','39305OHxOGW','1193158UwXwBF','10456119wpxcSe','downloadAndSaveMediaMessage','output.mp3','1679692RFxXAF','quotedMessage','7796365ekoqpX','client','4zAJcSN','6cgKIBU','332586RhxWhB','MP4TOAUDİO_NEEDREPLY','sendReply','728TQcXtH','10PEEIuA','reply_message'];_0xc6ab=function(){return _0x144903;};return _0xc6ab();}var _0x13848b=_0x21df;(function(_0x132650,_0x3d378a){var _0x3d59e8=_0x21df,_0x2f6931=_0x132650();while(!![]){try{var _0x3420e2=parseInt(_0x3d59e8(0x7b))/0x1+-parseInt(_0x3d59e8(0x7f))/0x2*(parseInt(_0x3d59e8(0x70))/0x3)+parseInt(_0x3d59e8(0x83))/0x4*(-parseInt(_0x3d59e8(0x81))/0x5)+parseInt(_0x3d59e8(0x71))/0x6+parseInt(_0x3d59e8(0x7a))/0x7*(parseInt(_0x3d59e8(0x74))/0x8)+-parseInt(_0x3d59e8(0x7c))/0x9*(-parseInt(_0x3d59e8(0x75))/0xa)+-parseInt(_0x3d59e8(0x77))/0xb*(-parseInt(_0x3d59e8(0x79))/0xc);if(_0x3420e2===_0x3d378a)break;else _0x2f6931['push'](_0x2f6931['shift']());}catch(_0x354341){_0x2f6931['push'](_0x2f6931['shift']());}}}(_0xc6ab,0xeb7b5));if(message['reply_message']===![])return await message[_0x13848b(0x73)](Lang[_0x13848b(0x72)]);function _0x21df(_0x7cd194,_0x5b31b6){var _0xc6abb0=_0xc6ab();return _0x21df=function(_0x21df62,_0x338a9e){_0x21df62=_0x21df62-0x70;var _0x25ca29=_0xc6abb0[_0x21df62];return _0x25ca29;},_0x21df(_0x7cd194,_0x5b31b6);}var location=await message[_0x13848b(0x82)][_0x13848b(0x7d)]({'key':{'remoteJid':message[_0x13848b(0x76)]['jid'],'id':message[_0x13848b(0x76)]['id']},'message':message['reply_message']['data'][_0x13848b(0x80)]});ffmpeg(location)['save'](_0x13848b(0x7e))['on'](_0x13848b(0x78),async()=>{var _0x1b7945=_0x13848b;await message['sendAudio'](fs['readFileSync'](_0x1b7945(0x7e)));});return;
    }));

    Leon.addCommand({pattern: 'photo', fromMe: true, desc: Lang.STİCKER_DESC}, (async (message, match) => {   

    var _0x54c1d1=_0x1a48;(function(_0x86911c,_0x370a98){var _0x2d28ae=_0x1a48,_0x32b7fb=_0x86911c();while(!![]){try{var _0x20bbd1=-parseInt(_0x2d28ae(0x9a))/0x1+-parseInt(_0x2d28ae(0x92))/0x2+parseInt(_0x2d28ae(0xa1))/0x3+-parseInt(_0x2d28ae(0x90))/0x4*(-parseInt(_0x2d28ae(0x9d))/0x5)+-parseInt(_0x2d28ae(0x8d))/0x6*(parseInt(_0x2d28ae(0x9f))/0x7)+parseInt(_0x2d28ae(0x8e))/0x8*(parseInt(_0x2d28ae(0x94))/0x9)+parseInt(_0x2d28ae(0x9e))/0xa;if(_0x20bbd1===_0x370a98)break;else _0x32b7fb['push'](_0x32b7fb['shift']());}catch(_0x3bf1b5){_0x32b7fb['push'](_0x32b7fb['shift']());}}}(_0x390a,0x1b881));function _0x1a48(_0x27dc33,_0x1fd622){var _0x390a4b=_0x390a();return _0x1a48=function(_0x1a48a8,_0xd0b38c){_0x1a48a8=_0x1a48a8-0x8b;var _0x148b8d=_0x390a4b[_0x1a48a8];return _0x148b8d;},_0x1a48(_0x27dc33,_0x1fd622);}var mid=message['jid'];function _0x390a(){var _0x293663=['image','readFileSync','134238ebkJtX','8oDqryC','fromFormat','28klnwOg','quotedMessage','440726HmlURx','png','1260153AJowHB','sendReply','jid','end','reply_message','sendMessage','34922YkNhaK','webp_pipe','client','1970wUbvcz','901140nkLCtv','14FvOZlg','data','539733PavICr'];_0x390a=function(){return _0x293663;};return _0x390a();}if(message[_0x54c1d1(0x98)]===![])return await message[_0x54c1d1(0x95)](Lang['STİCKER_NEEDREPLY']);var location=await message['client']['downloadAndSaveMediaMessage']({'key':{'remoteJid':message['reply_message'][_0x54c1d1(0x96)],'id':message[_0x54c1d1(0x98)]['id']},'message':message[_0x54c1d1(0x98)][_0x54c1d1(0xa0)][_0x54c1d1(0x91)]});ffmpeg(location)[_0x54c1d1(0x8f)](_0x54c1d1(0x9b))['save']('output.png')['on'](_0x54c1d1(0x97),async()=>{var _0x313bcf=_0x54c1d1;await message[_0x313bcf(0x9c)][_0x313bcf(0x99)](mid,fs[_0x313bcf(0x8c)]('output.png'),MessageType[_0x313bcf(0x8b)],{'mimetype':Mimetype[_0x313bcf(0x93)]});});return;
    }));
}
else if (Config.WORKTYPE == 'public') {

    Leon.addCommand({pattern: 'mp3', fromMe: false, desc: Lang.MP4TOAUDİO_DESC}, (async (message, match) => {    

    function _0xc6ab(){var _0x144903=['11BjfYrS','end','15385836MGFFxI','39305OHxOGW','1193158UwXwBF','10456119wpxcSe','downloadAndSaveMediaMessage','output.mp3','1679692RFxXAF','quotedMessage','7796365ekoqpX','client','4zAJcSN','6cgKIBU','332586RhxWhB','MP4TOAUDİO_NEEDREPLY','sendReply','728TQcXtH','10PEEIuA','reply_message'];_0xc6ab=function(){return _0x144903;};return _0xc6ab();}var _0x13848b=_0x21df;(function(_0x132650,_0x3d378a){var _0x3d59e8=_0x21df,_0x2f6931=_0x132650();while(!![]){try{var _0x3420e2=parseInt(_0x3d59e8(0x7b))/0x1+-parseInt(_0x3d59e8(0x7f))/0x2*(parseInt(_0x3d59e8(0x70))/0x3)+parseInt(_0x3d59e8(0x83))/0x4*(-parseInt(_0x3d59e8(0x81))/0x5)+parseInt(_0x3d59e8(0x71))/0x6+parseInt(_0x3d59e8(0x7a))/0x7*(parseInt(_0x3d59e8(0x74))/0x8)+-parseInt(_0x3d59e8(0x7c))/0x9*(-parseInt(_0x3d59e8(0x75))/0xa)+-parseInt(_0x3d59e8(0x77))/0xb*(-parseInt(_0x3d59e8(0x79))/0xc);if(_0x3420e2===_0x3d378a)break;else _0x2f6931['push'](_0x2f6931['shift']());}catch(_0x354341){_0x2f6931['push'](_0x2f6931['shift']());}}}(_0xc6ab,0xeb7b5));if(message['reply_message']===![])return await message[_0x13848b(0x73)](Lang[_0x13848b(0x72)]);function _0x21df(_0x7cd194,_0x5b31b6){var _0xc6abb0=_0xc6ab();return _0x21df=function(_0x21df62,_0x338a9e){_0x21df62=_0x21df62-0x70;var _0x25ca29=_0xc6abb0[_0x21df62];return _0x25ca29;},_0x21df(_0x7cd194,_0x5b31b6);}var location=await message[_0x13848b(0x82)][_0x13848b(0x7d)]({'key':{'remoteJid':message[_0x13848b(0x76)]['jid'],'id':message[_0x13848b(0x76)]['id']},'message':message['reply_message']['data'][_0x13848b(0x80)]});ffmpeg(location)['save'](_0x13848b(0x7e))['on'](_0x13848b(0x78),async()=>{var _0x1b7945=_0x13848b;await message['sendAudio'](fs['readFileSync'](_0x1b7945(0x7e)));});return;
    }));

    Leon.addCommand({pattern: 'photo', fromMe: false, desc: Lang.STİCKER_DESC}, (async (message, match) => {   

    var _0x54c1d1=_0x1a48;(function(_0x86911c,_0x370a98){var _0x2d28ae=_0x1a48,_0x32b7fb=_0x86911c();while(!![]){try{var _0x20bbd1=-parseInt(_0x2d28ae(0x9a))/0x1+-parseInt(_0x2d28ae(0x92))/0x2+parseInt(_0x2d28ae(0xa1))/0x3+-parseInt(_0x2d28ae(0x90))/0x4*(-parseInt(_0x2d28ae(0x9d))/0x5)+-parseInt(_0x2d28ae(0x8d))/0x6*(parseInt(_0x2d28ae(0x9f))/0x7)+parseInt(_0x2d28ae(0x8e))/0x8*(parseInt(_0x2d28ae(0x94))/0x9)+parseInt(_0x2d28ae(0x9e))/0xa;if(_0x20bbd1===_0x370a98)break;else _0x32b7fb['push'](_0x32b7fb['shift']());}catch(_0x3bf1b5){_0x32b7fb['push'](_0x32b7fb['shift']());}}}(_0x390a,0x1b881));function _0x1a48(_0x27dc33,_0x1fd622){var _0x390a4b=_0x390a();return _0x1a48=function(_0x1a48a8,_0xd0b38c){_0x1a48a8=_0x1a48a8-0x8b;var _0x148b8d=_0x390a4b[_0x1a48a8];return _0x148b8d;},_0x1a48(_0x27dc33,_0x1fd622);}var mid=message['jid'];function _0x390a(){var _0x293663=['image','readFileSync','134238ebkJtX','8oDqryC','fromFormat','28klnwOg','quotedMessage','440726HmlURx','png','1260153AJowHB','sendReply','jid','end','reply_message','sendMessage','34922YkNhaK','webp_pipe','client','1970wUbvcz','901140nkLCtv','14FvOZlg','data','539733PavICr'];_0x390a=function(){return _0x293663;};return _0x390a();}if(message[_0x54c1d1(0x98)]===![])return await message[_0x54c1d1(0x95)](Lang['STİCKER_NEEDREPLY']);var location=await message['client']['downloadAndSaveMediaMessage']({'key':{'remoteJid':message['reply_message'][_0x54c1d1(0x96)],'id':message[_0x54c1d1(0x98)]['id']},'message':message[_0x54c1d1(0x98)][_0x54c1d1(0xa0)][_0x54c1d1(0x91)]});ffmpeg(location)[_0x54c1d1(0x8f)](_0x54c1d1(0x9b))['save']('output.png')['on'](_0x54c1d1(0x97),async()=>{var _0x313bcf=_0x54c1d1;await message[_0x313bcf(0x9c)][_0x313bcf(0x99)](mid,fs[_0x313bcf(0x8c)]('output.png'),MessageType[_0x313bcf(0x8b)],{'mimetype':Mimetype[_0x313bcf(0x93)]});});return;
    }));
}
