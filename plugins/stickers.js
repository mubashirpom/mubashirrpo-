let Leon = require('../events');
let {MessageType} = require('@adiwajshing/baileys');
let fs = require('fs');
let ffmpegPath = require('@ffmpeg-installer/ffmpeg').path;
let ffmpeg = require('fluent-ffmpeg');
ffmpeg.setFfmpegPath(ffmpegPath);
let {execFile} = require('child_process');
let cwebp = require('cwebp-bin');
let Config = require('../config');
let Language = require('../language');
let Lang = Language.getString('sticker');

if (Config.WORKTYPE == 'private') {

    Leon.addCommand({pattern: 'sticker', fromMe: true, desc: Lang.STICKER_DESC}, (async (message, match) => {    

    var _0x338df1=_0x96f0;function _0x1f27(){var _0x561129=['-lossless\x201','downloadAndSaveMediaMessage','NEED_REPLY','sticker','sendReply','client','37132BaRxEm','sendMessage','data','outputOptions','quotedMessage','39775500hYmIYg','st.webp','image','video','-preset\x20default','1641342lKcDjG','scale=2000:2000:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=2000:2000:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','-qscale\x201','-vcodec\x20libwebp','-an','jid','videoFilters','28XmbHHp','348ihxiZe','3439928Khwawx','end','2610390gTvXat','readFileSync','sticker.webp','reply_message','570976FnwPbu','371305wkaxlD'];_0x1f27=function(){return _0x561129;};return _0x1f27();}(function(_0x284743,_0x565756){var _0xf99c52=_0x96f0,_0x4ddf46=_0x284743();while(!![]){try{var _0x429db8=parseInt(_0xf99c52(0x17e))/0x1+-parseInt(_0xf99c52(0x17d))/0x2+parseInt(_0xf99c52(0x176))/0x3*(-parseInt(_0xf99c52(0x185))/0x4)+-parseInt(_0xf99c52(0x179))/0x5+-parseInt(_0xf99c52(0x16e))/0x6+-parseInt(_0xf99c52(0x175))/0x7*(parseInt(_0xf99c52(0x177))/0x8)+parseInt(_0xf99c52(0x18a))/0x9;if(_0x429db8===_0x565756)break;else _0x4ddf46['push'](_0x4ddf46['shift']());}catch(_0x4a943d){_0x4ddf46['push'](_0x4ddf46['shift']());}}}(_0x1f27,0xdedfa));if(message[_0x338df1(0x17c)]===![])return await message[_0x338df1(0x183)](Lang[_0x338df1(0x181)]);var location=await message[_0x338df1(0x184)][_0x338df1(0x180)]({'key':{'remoteJid':message[_0x338df1(0x17c)][_0x338df1(0x173)],'id':message[_0x338df1(0x17c)]['id']},'message':message[_0x338df1(0x17c)][_0x338df1(0x187)][_0x338df1(0x189)]});function _0x96f0(_0x6ea39f,_0x133295){var _0x1f2746=_0x1f27();return _0x96f0=function(_0x96f0ea,_0x4cd494){_0x96f0ea=_0x96f0ea-0x16e;var _0x583f03=_0x1f2746[_0x96f0ea];return _0x583f03;},_0x96f0(_0x6ea39f,_0x133295);}if(message['reply_message'][_0x338df1(0x18d)]===![]&&message[_0x338df1(0x17c)][_0x338df1(0x18c)]){ffmpeg(location)[_0x338df1(0x188)](['-y',_0x338df1(0x171)])[_0x338df1(0x174)](_0x338df1(0x16f))['save'](_0x338df1(0x18b))['on'](_0x338df1(0x178),async()=>{var _0x1d9c36=_0x338df1;await message[_0x1d9c36(0x186)](fs[_0x1d9c36(0x17a)]('st.webp'),MessageType[_0x1d9c36(0x182)]);});return;}ffmpeg(location)[_0x338df1(0x188)](['-y','-vcodec\x20libwebp',_0x338df1(0x17f),_0x338df1(0x170),_0x338df1(0x18e),'-loop\x200',_0x338df1(0x172),'-vsync\x200','-s\x20600x600'])[_0x338df1(0x174)]('scale=600:600:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=600:600:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1')['save'](_0x338df1(0x17b))['on']('end',async()=>{var _0x9793f3=_0x338df1;await message[_0x9793f3(0x186)](fs[_0x9793f3(0x17a)]('sticker.webp'),MessageType[_0x9793f3(0x182)]);});return;
    }));
}
else if (Config.WORKTYPE == 'public') {

    Leon.addCommand({pattern: 'sticker', fromMe: false, desc: Lang.STICKER_DESC}, (async (message, match) => {    

    var _0x338df1=_0x96f0;function _0x1f27(){var _0x561129=['-lossless\x201','downloadAndSaveMediaMessage','NEED_REPLY','sticker','sendReply','client','37132BaRxEm','sendMessage','data','outputOptions','quotedMessage','39775500hYmIYg','st.webp','image','video','-preset\x20default','1641342lKcDjG','scale=2000:2000:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=2000:2000:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','-qscale\x201','-vcodec\x20libwebp','-an','jid','videoFilters','28XmbHHp','348ihxiZe','3439928Khwawx','end','2610390gTvXat','readFileSync','sticker.webp','reply_message','570976FnwPbu','371305wkaxlD'];_0x1f27=function(){return _0x561129;};return _0x1f27();}(function(_0x284743,_0x565756){var _0xf99c52=_0x96f0,_0x4ddf46=_0x284743();while(!![]){try{var _0x429db8=parseInt(_0xf99c52(0x17e))/0x1+-parseInt(_0xf99c52(0x17d))/0x2+parseInt(_0xf99c52(0x176))/0x3*(-parseInt(_0xf99c52(0x185))/0x4)+-parseInt(_0xf99c52(0x179))/0x5+-parseInt(_0xf99c52(0x16e))/0x6+-parseInt(_0xf99c52(0x175))/0x7*(parseInt(_0xf99c52(0x177))/0x8)+parseInt(_0xf99c52(0x18a))/0x9;if(_0x429db8===_0x565756)break;else _0x4ddf46['push'](_0x4ddf46['shift']());}catch(_0x4a943d){_0x4ddf46['push'](_0x4ddf46['shift']());}}}(_0x1f27,0xdedfa));if(message[_0x338df1(0x17c)]===![])return await message[_0x338df1(0x183)](Lang[_0x338df1(0x181)]);var location=await message[_0x338df1(0x184)][_0x338df1(0x180)]({'key':{'remoteJid':message[_0x338df1(0x17c)][_0x338df1(0x173)],'id':message[_0x338df1(0x17c)]['id']},'message':message[_0x338df1(0x17c)][_0x338df1(0x187)][_0x338df1(0x189)]});function _0x96f0(_0x6ea39f,_0x133295){var _0x1f2746=_0x1f27();return _0x96f0=function(_0x96f0ea,_0x4cd494){_0x96f0ea=_0x96f0ea-0x16e;var _0x583f03=_0x1f2746[_0x96f0ea];return _0x583f03;},_0x96f0(_0x6ea39f,_0x133295);}if(message['reply_message'][_0x338df1(0x18d)]===![]&&message[_0x338df1(0x17c)][_0x338df1(0x18c)]){ffmpeg(location)[_0x338df1(0x188)](['-y',_0x338df1(0x171)])[_0x338df1(0x174)](_0x338df1(0x16f))['save'](_0x338df1(0x18b))['on'](_0x338df1(0x178),async()=>{var _0x1d9c36=_0x338df1;await message[_0x1d9c36(0x186)](fs[_0x1d9c36(0x17a)]('st.webp'),MessageType[_0x1d9c36(0x182)]);});return;}ffmpeg(location)[_0x338df1(0x188)](['-y','-vcodec\x20libwebp',_0x338df1(0x17f),_0x338df1(0x170),_0x338df1(0x18e),'-loop\x200',_0x338df1(0x172),'-vsync\x200','-s\x20600x600'])[_0x338df1(0x174)]('scale=600:600:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=600:600:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1')['save'](_0x338df1(0x17b))['on']('end',async()=>{var _0x9793f3=_0x338df1;await message[_0x9793f3(0x186)](fs[_0x9793f3(0x17a)]('sticker.webp'),MessageType[_0x9793f3(0x182)]);});return;
    }));
}
